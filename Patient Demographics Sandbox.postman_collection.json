{
	"info": {
		"_postman_id": "ea365034-55e9-4a31-9c68-1294c5b14e46",
		"name": "Patient Demographics Sandbox",
		"description": "Sandbox example requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Search for a patient",
			"item": [
				{
					"name": "Successful simple search",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&given=Jane&gender=female&birthdate=2010-10-22",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "2010-10-22"
								}
							]
						},
						"description": "Example of a simple search returning a single result"
					},
					"response": []
				},
				{
					"name": "Unsuccessful simple search",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient?family=Bingham&given=John&gender=male&birthdate=1934-12-18",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Bingham"
								},
								{
									"key": "given",
									"value": "John"
								},
								{
									"key": "gender",
									"value": "male"
								},
								{
									"key": "birthdate",
									"value": "1934-12-18"
								}
							]
						},
						"description": "Example of a search that is valid, but returns no results"
					},
					"response": []
				},
				{
					"name": "Invalid birth date format",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&given=Jane&gender=female&birthdate=20101022",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "20101022"
								}
							]
						},
						"description": "Example error caused by providing `birthdate` query param in an invalid format"
					},
					"response": []
				},
				{
					"name": "Invalid death date format",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&given=Jane&gender=female&death-date=20101022",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "death-date",
									"value": "20101022"
								}
							]
						},
						"description": "Example error caused by providing `birthdate` query param in an invalid format"
					},
					"response": []
				},
				{
					"name": "Too few search parameters",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							]
						},
						"description": "Example error caused by providing too few (none in this instance) search parameters"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Retrieve a patient's record",
			"item": [
				{
					"name": "Patient exists",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						},
						"description": "Example successful patient retrieval"
					},
					"response": []
				},
				{
					"name": "Patient doesn't exist",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient/9111231130",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9111231130"
							]
						},
						"description": "Requesting a patient that doesn't exist (but providing a valid NHS number)"
					},
					"response": []
				},
				{
					"name": "Invalid NHS Number",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/Patient/9000000000",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000000"
							]
						},
						"description": "Specifying an *invalid* NHS number. NHS Numbers must conform to a [specific format](https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp)"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Update a patient's record",
			"item": [
				{
					"name": "Successful update: Add a new name to the patient",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"value": "W/\"2\"",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json-patch+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"add\",\r\n      \"path\": \"/name/-\",\r\n      \"value\": {\r\n        \"use\": \"usual\",\r\n        \"period\": {\r\n          \"start\": \"2019-12-31\"\r\n        },\r\n        \"text\": \"Dr Joe H. M. Bloggs PhD\",\r\n        \"prefix\": \"Dr\",\r\n        \"given\": [\r\n          \"Joe\",\r\n          \"Horation\",\r\n          \"Maximus\"\r\n        ],\r\n        \"family\": \"Bloggs\",\r\n        \"suffix\": \"PhD\"\r\n      }\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				},
				{
					"name": "Successful update: Update the first given name entry",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"type": "text",
								"value": "W/\"2\""
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": true,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"replace\",\r\n      \"path\": \"/name/0/given/0\",\r\n      \"value\": \"Anne\"\r\n    },\r\n    {\r\n      \"op\": \"replace\",\r\n      \"path\": \"/name/0/text\",\r\n      \"value\": \"Mrs Anne Adele Smith MBE\"\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				},
				{
					"name": "Successful update: Remove a name no longer in use",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"type": "text",
								"value": "W/\"2\""
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid patch operation(s)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"type": "text",
								"value": "W/\"2\""
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/5\"\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				},
				{
					"name": "No Patches Submitted",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"type": "text",
								"value": "W/\"2\""
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid NHS Number",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "If-Match",
								"type": "text",
								"value": "W/\"2\""
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000000",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000000"
							]
						}
					},
					"response": []
				},
				{
					"name": "Missing If-Match Header",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json-patch+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						}
					},
					"response": []
				}
			],
			"description": "Examples of using the PATCH method to update a patient's record.\n\nYour changes will not be persisted in the sandbox environment. JSON Patch operations themselves are validated, but the resulting resource is not validated for correctness.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "5f97319a-6d91-42d1-964b-7acae59ac0b9",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "564f16c2-fb26-43fc-8e4a-01a175780007",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "d89fdf68-40d2-4814-8c46-cff90c52a304",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "f0f907f7-0d21-459d-a534-e50dd8588aaa",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "e86e0a28-7fa6-4aa1-9ab2-7150b48780d8",
			"key": "base_url",
			"value": "https://emea-demo8-test.apigee.net/v1",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}