{
	"info": {
		"_postman_id": "2f102499-c324-40cc-83d6-b62e4c87071a",
		"name": "Personal Demographics Service - Sandbox",
		"description": "Sandbox Testing",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Patient",
			"item": [
				{
					"name": "Search",
					"item": [
						{
							"name": "Advanced",
							"item": [
								{
									"name": "Successful advanced search",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e6f6b1cd-eac4-4920-adf6-84c4a5563a18",
												"exec": [
													"pm.test(\"Returns status code 200 OK\", () =>{",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"Returns correct canned response\", () =>{",
													"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
													"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
													"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "0e883510-363b-4baf-8b4e-16e98ca075a1",
												"exec": [
													"var expected_response =",
													"{",
													"    \"resourceType\": \"Bundle\",",
													"    \"type\": \"searchset\",",
													"    \"timestamp\": 1583759498649,",
													"    \"total\": 2,",
													"    \"entry\": [",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009\",",
													"            \"search\": {",
													"                \"score\": 0.8343",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000009\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000009\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jane\"",
													"                        ],",
													"                        \"family\": \"Smith\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        },",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000017\",",
													"            \"search\": {",
													"                \"score\": 0.8343",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000017\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000017\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jayne\"",
													"                        ],",
													"                        \"family\": \"Smyth\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        }",
													"    ]",
													"}",
													"pm.environment.set(\"expected_response\", expected_response);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{environment}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22",
											"host": [
												"{{environment}}"
											],
											"path": [
												"Patient"
											],
											"query": [
												{
													"key": "family",
													"value": "Sm*"
												},
												{
													"key": "gender",
													"value": "female"
												},
												{
													"key": "birthdate",
													"value": "eq2010-10-22"
												}
											]
										},
										"description": "HTTP Status 200 with search result of two."
									},
									"response": []
								},
								{
									"name": "Successful advanced search with max-results",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ab712c4d-4678-4cae-95c7-6872a099cf8b",
												"exec": [
													"pm.test(\"Returns status code 200 OK\", () =>{",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"Returns correct canned response\", () =>{",
													"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
													"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
													"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "e628ab75-77a7-44f6-9800-a398c645c0db",
												"exec": [
													"var expected_response =",
													"{",
													"    \"resourceType\": \"Bundle\",",
													"    \"type\": \"searchset\",",
													"    \"timestamp\": 1583759518968,",
													"    \"total\": 2,",
													"    \"entry\": [",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009\",",
													"            \"search\": {",
													"                \"score\": 0.8343",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000009\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000009\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jane\"",
													"                        ],",
													"                        \"family\": \"Smith\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        },",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000017\",",
													"            \"search\": {",
													"                \"score\": 0.8343",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000017\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000017\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jayne\"",
													"                        ],",
													"                        \"family\": \"Smyth\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        }",
													"    ]",
													"}",
													"",
													"pm.environment.set(\"expected_response\", expected_response);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{environment}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&_max-results=2",
											"host": [
												"{{environment}}"
											],
											"path": [
												"Patient"
											],
											"query": [
												{
													"key": "family",
													"value": "Sm*"
												},
												{
													"key": "gender",
													"value": "female"
												},
												{
													"key": "birthdate",
													"value": "eq2010-10-22"
												},
												{
													"key": "_max-results",
													"value": "2"
												}
											]
										},
										"description": "HTTP Status 200 with search result of two."
									},
									"response": []
								},
								{
									"name": "Successful advanced search with data range parameters",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4254ce58-ee30-4d80-8a89-3009b48c0c9d",
												"exec": [
													"pm.test(\"Returns status code 200 OK\", () =>{",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"Returns correct canned response\", () =>{",
													"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
													"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
													"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "d6c21f3a-7864-47fc-86b0-7efbf51b65d8",
												"exec": [
													"var expected_response =",
													"{",
													"    \"resourceType\": \"Bundle\",",
													"    \"type\": \"searchset\",",
													"    \"timestamp\": 1583759536981,",
													"    \"total\": 1,",
													"    \"entry\": [",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009\",",
													"            \"search\": {",
													"                \"score\": 1",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000009\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000009\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jane\"",
													"                        ],",
													"                        \"family\": \"Smith\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        }",
													"    ]",
													"}",
													"",
													"pm.environment.set(\"expected_response\", expected_response);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{environment}}/Patient?family=Smith&gender=female&birthdate=ge2010-10-21&birthdate=le2010-10-23",
											"host": [
												"{{environment}}"
											],
											"path": [
												"Patient"
											],
											"query": [
												{
													"key": "family",
													"value": "Smith"
												},
												{
													"key": "gender",
													"value": "female"
												},
												{
													"key": "birthdate",
													"value": "ge2010-10-21"
												},
												{
													"key": "birthdate",
													"value": "le2010-10-23"
												}
											]
										},
										"description": "HTTP Status 200 with single search result."
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Algorithmic",
							"item": [
								{
									"name": "Successful algorithmic search",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "473eff40-d833-4134-bc76-15e564ea38a8",
												"exec": [
													"pm.test(\"Returns status code 200 OK\", () =>{",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"Returns correct canned response\", () =>{",
													"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
													"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
													"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "d8f225ae-dc2e-4cfe-aff4-31cc4445722f",
												"exec": [
													"var expected_response =",
													"{",
													"    \"resourceType\": \"Bundle\",",
													"    \"type\": \"searchset\",",
													"    \"timestamp\": 1583759558830,",
													"    \"total\": 1,",
													"    \"entry\": [",
													"        {",
													"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000017\",",
													"            \"search\": {",
													"                \"score\": 0.8976",
													"            },",
													"            \"resource\": {",
													"                \"resourceType\": \"Patient\",",
													"                \"id\": \"9000000017\",",
													"                \"identifier\": [",
													"                    {",
													"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
													"                        \"value\": \"9000000017\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
													"                                \"valueCodeableConcept\": {",
													"                                    \"coding\": [",
													"                                        {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
													"                                            \"version\": \"1.0.0\",",
													"                                            \"code\": \"01\",",
													"                                            \"display\": \"Number present and verified\"",
													"                                        }",
													"                                    ]",
													"                                }",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"meta\": {",
													"                    \"versionId\": \"2\",",
													"                    \"security\": [",
													"                        {",
													"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
													"                            \"code\": \"U\",",
													"                            \"display\": \"unrestricted\"",
													"                        }",
													"                    ]",
													"                },",
													"                \"name\": [",
													"                    {",
													"                        \"id\": \"123\",",
													"                        \"use\": \"usual\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"given\": [",
													"                            \"Jayne\"",
													"                        ],",
													"                        \"family\": \"Smyth\",",
													"                        \"prefix\": [",
													"                            \"Mrs\"",
													"                        ],",
													"                        \"suffix\": [",
													"                            \"MBE\"",
													"                        ]",
													"                    }",
													"                ],",
													"                \"gender\": \"female\",",
													"                \"birthDate\": \"2010-10-22\",",
													"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
													"                \"address\": [",
													"                    {",
													"                        \"id\": \"456\",",
													"                        \"period\": {",
													"                            \"start\": \"2020-01-01\",",
													"                            \"end\": \"2021-12-31\"",
													"                        },",
													"                        \"use\": \"home\",",
													"                        \"line\": [",
													"                            \"1 Trevelyan Square\",",
													"                            \"Boar Lane\",",
													"                            \"City Centre\",",
													"                            \"Leeds\",",
													"                            \"West Yorkshire\"",
													"                        ],",
													"                        \"postalCode\": \"LS1 6AE\",",
													"                        \"extension\": [",
													"                            {",
													"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
													"                                \"extension\": [",
													"                                    {",
													"                                        \"url\": \"type\",",
													"                                        \"valueCoding\": {",
													"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
													"                                            \"code\": \"PAF\"",
													"                                        }",
													"                                    },",
													"                                    {",
													"                                        \"url\": \"value\",",
													"                                        \"valueString\": \"12345678\"",
													"                                    }",
													"                                ]",
													"                            }",
													"                        ]",
													"                    }",
													"                ],",
													"                \"generalPractitioner\": [",
													"                    {",
													"                        \"id\": \"254406A3\",",
													"                        \"type\": \"Organization\",",
													"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
													"                        \"identifier\": {",
													"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
													"                            \"value\": \"Y12345\",",
													"                            \"period\": {",
													"                                \"start\": \"2020-01-01\",",
													"                                \"end\": \"2021-12-31\"",
													"                            }",
													"                        }",
													"                    }",
													"                ]",
													"            }",
													"        }",
													"    ]",
													"}",
													"pm.environment.set(\"expected_response\", expected_response);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{environment}}/Patient?family=smith&given=Jane&gender=female&birthdate=2010-10-22&_fuzzy-match=true",
											"host": [
												"{{environment}}"
											],
											"path": [
												"Patient"
											],
											"query": [
												{
													"key": "family",
													"value": "smith"
												},
												{
													"key": "given",
													"value": "Jane"
												},
												{
													"key": "gender",
													"value": "female"
												},
												{
													"key": "birthdate",
													"value": "2010-10-22"
												},
												{
													"key": "_fuzzy-match",
													"value": "true"
												}
											]
										},
										"description": "HTTP Status 200 with single search result."
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Successful simple search",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "4c125fb0-50b2-4365-96b3-dedde59aa905",
										"exec": [
											"pm.test(\"Returns status code 200 OK\", () =>{",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
											"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
											"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3b8b5c1f-e72c-41d3-9a15-a9555e7efbe1",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"Bundle\",",
											"    \"type\": \"searchset\",",
											"    \"timestamp\": 1583759464783,",
											"    \"total\": 1,",
											"    \"entry\": [",
											"        {",
											"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009\",",
											"            \"search\": {",
											"                \"score\": 1",
											"            },",
											"            \"resource\": {",
											"                \"resourceType\": \"Patient\",",
											"                \"id\": \"9000000009\",",
											"                \"identifier\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"                        \"value\": \"9000000009\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                                            \"version\": \"1.0.0\",",
											"                                            \"code\": \"01\",",
											"                                            \"display\": \"Number present and verified\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"meta\": {",
											"                    \"versionId\": \"2\",",
											"                    \"security\": [",
											"                        {",
											"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"                            \"code\": \"U\",",
											"                            \"display\": \"unrestricted\"",
											"                        }",
											"                    ]",
											"                },",
											"                \"name\": [",
											"                    {",
											"                        \"id\": \"123\",",
											"                        \"use\": \"usual\",",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"given\": [",
											"                            \"Jane\"",
											"                        ],",
											"                        \"family\": \"Smith\",",
											"                        \"prefix\": [",
											"                            \"Mrs\"",
											"                        ],",
											"                        \"suffix\": [",
											"                            \"MBE\"",
											"                        ]",
											"                    }",
											"                ],",
											"                \"gender\": \"female\",",
											"                \"birthDate\": \"2010-10-22\",",
											"                \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
											"                \"address\": [",
											"                    {",
											"                        \"id\": \"456\",",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"use\": \"home\",",
											"                        \"line\": [",
											"                            \"1 Trevelyan Square\",",
											"                            \"Boar Lane\",",
											"                            \"City Centre\",",
											"                            \"Leeds\",",
											"                            \"West Yorkshire\"",
											"                        ],",
											"                        \"postalCode\": \"LS1 6AE\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
											"                                \"extension\": [",
											"                                    {",
											"                                        \"url\": \"type\",",
											"                                        \"valueCoding\": {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
											"                                            \"code\": \"PAF\"",
											"                                        }",
											"                                    },",
											"                                    {",
											"                                        \"url\": \"value\",",
											"                                        \"valueString\": \"12345678\"",
											"                                    }",
											"                                ]",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"generalPractitioner\": [",
											"                    {",
											"                        \"id\": \"254406A3\",",
											"                        \"type\": \"Organization\",",
											"                        \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
											"                        \"identifier\": {",
											"                            \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
											"                            \"value\": \"Y12345\",",
											"                            \"period\": {",
											"                                \"start\": \"2020-01-01\",",
											"                                \"end\": \"2021-12-31\"",
											"                            }",
											"                        }",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Smith"
										},
										{
											"key": "gender",
											"value": "female"
										},
										{
											"key": "birthdate",
											"value": "eq2010-10-22"
										}
									]
								},
								"description": "Example of a simple search returning a single result"
							},
							"response": []
						},
						{
							"name": "Successful sensitive search",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "220a9717-9110-4f86-b256-72610b4faaf5",
										"exec": [
											"pm.test(\"Returns status code 200 OK\", () =>{",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    console.log(\"Expected Response: \" + JSON.stringify(pm.environment.get(\"expected_response\")));",
											"    console.log(\"Actual Response: \" + JSON.stringify(pm.response.json().entry[0]));",
											"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "7cfee2e6-2b77-4978-8178-82f9937e9a85",
										"exec": [
											"var expected_response =",
											"{",
											"  \"resourceType\": \"Bundle\",",
											"  \"type\": \"searchset\",",
											"  \"timestamp\": \"2020-04-16T09:37:57+00:00\",",
											"  \"total\": 1,",
											"  \"entry\": [",
											"    {",
											"      \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000025\",",
											"      \"search\": {",
											"        \"score\": 1",
											"      },",
											"      \"resource\": {",
											"        \"resourceType\": \"Patient\",",
											"        \"id\": \"9000000025\",",
											"        \"identifier\": [",
											"          {",
											"            \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"            \"value\": \"9000000025\",",
											"            \"extension\": [",
											"              {",
											"                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"                \"valueCodeableConcept\": {",
											"                  \"coding\": [",
											"                    {",
											"                      \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                      \"version\": \"1.0.0\",",
											"                      \"code\": \"01\",",
											"                      \"display\": \"Number present and verified\"",
											"                    }",
											"                  ]",
											"                }",
											"              }",
											"            ]",
											"          }",
											"        ],",
											"        \"meta\": {",
											"          \"versionId\": \"2\",",
											"          \"security\": [",
											"            {",
											"              \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"              \"code\": \"R\",",
											"              \"display\": \"restricted\"",
											"            }",
											"          ]",
											"        },",
											"        \"name\": [",
											"          {",
											"            \"id\": \"123\",",
											"            \"use\": \"usual\",",
											"            \"period\": {",
											"              \"start\": \"2020-01-01\",",
											"              \"end\": \"2021-12-31\"",
											"            },",
											"            \"given\": [",
											"              \"Janet\"",
											"            ],",
											"            \"family\": \"Smythe\",",
											"            \"prefix\": [",
											"              \"Mrs\"",
											"            ],",
											"            \"suffix\": [",
											"              \"MBE\"",
											"            ]",
											"          }",
											"        ],",
											"        \"gender\": \"female\",",
											"        \"birthDate\": \"2005-06-16\",",
											"        \"deceasedDateTime\": \"2005-06-16T00:00:00+00:00\"",
											"      }",
											"    }",
											"  ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Smythe&given=Janet&gender=female&birthdate=eq2005-06-16",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Smythe"
										},
										{
											"key": "given",
											"value": "Janet"
										},
										{
											"key": "gender",
											"value": "female"
										},
										{
											"key": "birthdate",
											"value": "eq2005-06-16"
										}
									]
								},
								"description": "Example of a simple search returning a single result"
							},
							"response": []
						},
						{
							"name": "Unsuccessful simple search",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "22246b75-3023-40fa-ae5f-40046336900f",
										"exec": [
											"pm.test(\"Returns status code 200 OK\", () =>{",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns 0 search results\", () =>{",
											"    pm.expect(pm.response.json().entry).to.eql(undefined);",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Bingham&given=John&gender=male&birthdate=eq1934-12-18",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Bingham"
										},
										{
											"key": "given",
											"value": "John"
										},
										{
											"key": "gender",
											"value": "male"
										},
										{
											"key": "birthdate",
											"value": "eq1934-12-18"
										}
									]
								},
								"description": "Example of a search that is valid, but returns no results"
							},
							"response": []
						},
						{
							"name": "Invalid birth date format",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8d29c738-36bc-482b-b1fb-705f36d14d22",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 400 Bad Request\", () =>{",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"value\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"INVALID_SEARCH_DATA\",",
											"                        \"display\": \"Invalid value - '20101022' in field 'birthdate'\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Smith&given=Jane&gender=female&birthdate=20101022",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Smith"
										},
										{
											"key": "given",
											"value": "Jane"
										},
										{
											"key": "gender",
											"value": "female"
										},
										{
											"key": "birthdate",
											"value": "20101022"
										}
									]
								},
								"description": "Example error caused by providing `birthdate` query param in an invalid format"
							},
							"response": []
						},
						{
							"name": "Invalid death date format",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "59d46740-2d6f-41fe-9586-77858b76ddd0",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 400 Bad Request\", () =>{",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"value\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"INVALID_SEARCH_DATA\",",
											"                        \"display\": \"Invalid value - '20101022' in field 'death-date'\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Smith&given=Jane&gender=female&death-date=20101022",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Smith"
										},
										{
											"key": "given",
											"value": "Jane"
										},
										{
											"key": "gender",
											"value": "female"
										},
										{
											"key": "death-date",
											"value": "20101022"
										}
									]
								},
								"description": "Example error caused by providing `birthdate` query param in an invalid format"
							},
							"response": []
						},
						{
							"name": "Too few search parameters",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c4bf1450-9420-4e7b-8bfa-e97a63804589",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 400 Bad Request\", () =>{",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"required\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"MISSING_VALUE\",",
											"                        \"display\": \"Not enough search parameters were provided to be able to make a search\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									]
								},
								"description": "Example error caused by providing too few (none in this instance) search parameters"
							},
							"response": []
						},
						{
							"name": "Sensitive Patient Search",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "99d88c88-8fc9-47aa-a85d-75eb7354bfbe",
										"exec": [
											"pm.test(\"Returns status code 200 OK\", () =>{",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    let expectedResp = JSON.stringify(pm.environment.get(\"expected_response\").entry[0]);",
											"    let actualResp = JSON.stringify(pm.response.json().entry[0]);",
											"    console.log(\"Expected Response:\", expectedResp);",
											"    console.log(\"Actual Response: \", actualResp);",
											"    pm.expect(expectedResp).to.eql(actualResp);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "7724c110-3c7e-4287-a9d3-ac6db4bb125d",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"Bundle\",",
											"    \"type\": \"searchset\",",
											"    \"timestamp\": \"2020-04-16T09:51:16+00:00\",",
											"    \"total\": 1,",
											"    \"entry\": [",
											"        {",
											"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000025\",",
											"            \"search\": {",
											"                \"score\": 1",
											"            },",
											"            \"resource\": {",
											"                \"resourceType\": \"Patient\",",
											"                \"id\": \"9000000025\",",
											"                \"identifier\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"                        \"value\": \"9000000025\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                                            \"version\": \"1.0.0\",",
											"                                            \"code\": \"01\",",
											"                                            \"display\": \"Number present and verified\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"meta\": {",
											"                    \"versionId\": \"2\",",
											"                    \"security\": [",
											"                        {",
											"                            \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"                            \"code\": \"R\",",
											"                            \"display\": \"restricted\"",
											"                        }",
											"                    ]",
											"                },",
											"                \"name\": [",
											"                    {",
											"                        \"id\": \"123\",",
											"                        \"use\": \"usual\",",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"given\": [",
											"                            \"Janet\"",
											"                        ],",
											"                        \"family\": \"Smythe\",",
											"                        \"prefix\": [",
											"                            \"Mrs\"",
											"                        ],",
											"                        \"suffix\": [",
											"                            \"MBE\"",
											"                        ]",
											"                    }",
											"                ],",
											"                \"gender\": \"female\",",
											"                \"birthDate\": \"2005-06-16\",",
											"                \"deceasedDateTime\": \"2005-06-16T00:00:00+00:00\"",
											"            }",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient?family=Smythe&gender=female&given=Janet&birthdate=eq2005-06-16",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient"
									],
									"query": [
										{
											"key": "family",
											"value": "Smythe"
										},
										{
											"key": "gender",
											"value": "female"
										},
										{
											"key": "given",
											"value": "Janet"
										},
										{
											"key": "birthdate",
											"value": "eq2005-06-16"
										}
									]
								},
								"description": "Example of a simple search returning a single result"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Retrieve",
					"item": [
						{
							"name": "Retrieve: Patient Exists",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c41f242a-b945-429e-889b-6ff2fc17281b",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 200 OK\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct etag header\", function () {",
											"    pm.response.to.have.header(\"etag\", \"W/\\\"2\\\"\");",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    var expected = JSON.stringify(pm.environment.get(\"expected_response\"));",
											"    var actual = JSON.stringify(response);",
											"    pm.expect(actual).to.eql(expected);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "b800ba12-acdd-4a6e-abe9-9c8196fad356",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"Patient\",",
											"    \"id\": \"9000000009\",",
											"    \"identifier\": [",
											"        {",
											"            \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"            \"value\": \"9000000009\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"01\",",
											"                                \"display\": \"Number present and verified\"",
											"                            }",
											"                        ]",
											"                    }",
											"                }",
											"            ]",
											"        }",
											"    ],",
											"    \"meta\": {",
											"        \"versionId\": \"2\",",
											"        \"security\": [",
											"            {",
											"                \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"                \"code\": \"U\",",
											"                \"display\": \"unrestricted\"",
											"            }",
											"        ]",
											"    },",
											"    \"name\": [",
											"        {",
											"            \"id\": \"123\",",
											"            \"use\": \"usual\",",
											"            \"period\": {",
											"                \"start\": \"2020-01-01\",",
											"                \"end\": \"2021-12-31\"",
											"            },",
											"            \"given\": [",
											"                \"Jane\"",
											"            ],",
											"            \"family\": \"Smith\",",
											"            \"prefix\": [",
											"                \"Mrs\"",
											"            ],",
											"            \"suffix\": [",
											"                \"MBE\"",
											"            ]",
											"        }",
											"    ],",
											"    \"gender\": \"female\",",
											"    \"birthDate\": \"2010-10-22\",",
											"    \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
											"    \"address\": [",
											"        {",
											"            \"id\": \"456\",",
											"            \"period\": {",
											"                \"start\": \"2020-01-01\",",
											"                \"end\": \"2021-12-31\"",
											"            },",
											"            \"use\": \"home\",",
											"            \"line\": [",
											"                \"1 Trevelyan Square\",",
											"                \"Boar Lane\",",
											"                \"City Centre\",",
											"                \"Leeds\",",
											"                \"West Yorkshire\"",
											"            ],",
											"            \"postalCode\": \"LS1 6AE\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
											"                    \"extension\": [",
											"                        {",
											"                            \"url\": \"type\",",
											"                            \"valueCoding\": {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
											"                                \"code\": \"PAF\"",
											"                            }",
											"                        },",
											"                        {",
											"                            \"url\": \"value\",",
											"                            \"valueString\": \"12345678\"",
											"                        }",
											"                    ]",
											"                }",
											"            ]",
											"        }",
											"    ],",
											"    \"telecom\": [",
											"        {",
											"            \"id\": \"789\",",
											"            \"period\": {",
											"                \"start\": \"2020-01-01\",",
											"                \"end\": \"2021-12-31\"",
											"            },",
											"            \"system\": \"phone\",",
											"            \"value\": \"01632960587\",",
											"            \"use\": \"work\"",
											"        }",
											"    ],",
											"    \"generalPractitioner\": [",
											"        {",
											"            \"id\": \"254406A3\",",
											"            \"type\": \"Organization\",",
											"            \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
											"            \"identifier\": {",
											"                \"system\": \"https://digital.nhs.uk/services/organisation-data-service\",",
											"                \"value\": \"Y12345\",",
											"                \"period\": {",
											"                    \"start\": \"2020-01-01\",",
											"                    \"end\": \"2021-12-31\"",
											"                }",
											"            }",
											"        }",
											"    ],",
											"    \"extension\": [",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NominatedPharmacy\",",
											"            \"valueReference\": {",
											"                \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y12345\",",
											"                \"identifier\": {",
											"                    \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"                    \"value\": \"Y12345\",",
											"                    \"period\": {",
											"                        \"start\": \"2020-01-01\",",
											"                        \"end\": \"2021-12-31\"",
											"                    }",
											"                }",
											"            }",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-DispensingDoctor\",",
											"            \"valueReference\": {",
											"                \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y23456\",",
											"                \"identifier\": {",
											"                    \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"                    \"value\": \"Y23456\",",
											"                    \"period\": {",
											"                        \"start\": \"2020-01-01\",",
											"                        \"end\": \"2021-12-31\"",
											"                    }",
											"                }",
											"            }",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-MedicalApplianceSupplier\",",
											"            \"valueReference\": {",
											"                \"reference\": \"https://directory.spineservices.nhs.uk/STU3/Organization/Y34567\",",
											"                \"identifier\": {",
											"                    \"system\": \"https://fhir.nhs.uk/Id/ods-organization-code\",",
											"                    \"value\": \"Y34567\",",
											"                    \"period\": {",
											"                        \"start\": \"2020-01-01\",",
											"                        \"end\": \"2021-12-31\"",
											"                    }",
											"                }",
											"            }",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"deathNotificationStatus\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-DeathNotificationStatus\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"2\",",
											"                                \"display\": \"Formal - death notice received from Registrar of Deaths\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"systemEffectiveDate\",",
											"                    \"valueDateTime\": \"2010-10-22T00:00:00+00:00\"",
											"                }",
											"            ]",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"language\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"fr\",",
											"                                \"display\": \"French\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"interpreterRequired\",",
											"                    \"valueBoolean\": true",
											"                }",
											"            ]",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"PreferredWrittenCommunicationFormat\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",",
											"                                \"code\": \"12\",",
											"                                \"display\": \"Braille\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"PreferredContactMethod\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\",",
											"                                \"code\": \"1\",",
											"                                \"display\": \"Letter\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"PreferredContactTimes\",",
											"                    \"valueString\": \"Not after 7pm\"",
											"                }",
											"            ]",
											"        }",
											"    ]",
											"}",
											"",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000009",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Retrieve: Sensitive Patient Exists",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "11660223-4a1a-49c4-957d-ad74c7974e35",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 200 OK\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct etag header\", function () {",
											"    pm.response.to.have.header(\"etag\", \"W/\\\"2\\\"\");",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    var expected = JSON.stringify(pm.environment.get(\"expected_response\"));",
											"    var actual = JSON.stringify(response);",
											"    pm.expect(actual).to.eql(expected);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "5214198f-24fc-460d-98a1-49a3375d4d63",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"Patient\",",
											"    \"id\": \"9000000025\",",
											"    \"identifier\": [",
											"        {",
											"            \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"            \"value\": \"9000000025\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"01\",",
											"                                \"display\": \"Number present and verified\"",
											"                            }",
											"                        ]",
											"                    }",
											"                }",
											"            ]",
											"        }",
											"    ],",
											"    \"meta\": {",
											"        \"versionId\": \"2\",",
											"        \"security\": [",
											"            {",
											"                \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"                \"code\": \"R\",",
											"                \"display\": \"restricted\"",
											"            }",
											"        ]",
											"    },",
											"    \"name\": [",
											"        {",
											"            \"id\": \"123\",",
											"            \"use\": \"usual\",",
											"            \"period\": {",
											"                \"start\": \"2020-01-01\",",
											"                \"end\": \"2021-12-31\"",
											"            },",
											"            \"given\": [",
											"                \"Janet\"",
											"            ],",
											"            \"family\": \"Smythe\",",
											"            \"prefix\": [",
											"                \"Mrs\"",
											"            ],",
											"            \"suffix\": [",
											"                \"MBE\"",
											"            ]",
											"        }",
											"    ],",
											"    \"gender\": \"female\",",
											"    \"birthDate\": \"2010-10-22\",",
											"    \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
											"    \"extension\": [",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"deathNotificationStatus\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-DeathNotificationStatus\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"2\",",
											"                                \"display\": \"Formal - death notice received from Registrar of Deaths\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"systemEffectiveDate\",",
											"                    \"valueDateTime\": \"2010-10-22T00:00:00+00:00\"",
											"                }",
											"            ]",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000025",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000025"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Retrieve: Patient does not Exist",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e3da6210-925e-467d-8261-744cbfa2ff7c",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 404 Not Found\", () =>{",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"not_found\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"RESOURCE_NOT_FOUND\",",
											"                        \"display\": \"Resource not found\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9111231130",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9111231130"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Retrieve: Invalid NHS number",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "718e9c8a-a508-4978-8e0e-3fb73311d54b",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 400 Bad Request\", () =>{",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"value\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"INVALID_RESOURCE_ID\",",
											"                        \"display\": \"Resource Id is invalid\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000000",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000000"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Retrieve: No NHS Number",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a2c2e468-a00e-4967-ada6-097bd050ecc5",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 400 Bad Request\", () =>{",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"processing\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"UNSUPPORTED_SERVICE\",",
											"                        \"display\": \"Unsupported Service\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										""
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Retrieve: Sensitive Patient",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f7dbb017-52e5-4872-98ee-4dd0f49dcc21",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 200 OK\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct etag header\", function () {",
											"    pm.response.to.have.header(\"etag\", \"W/\\\"2\\\"\");",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    let expectedResp = JSON.stringify(pm.environment.get(\"expected_response\").identifier[0]);",
											"    let actualResp = JSON.stringify(pm.response.json().identifier[0]);",
											"    console.log(\"Expected Response:\", expectedResp);",
											"    console.log(\"Actual Response:\", actualResp);",
											"    pm.expect(expectedResp).to.eql(actualResp);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "177bff59-1203-4a97-ab17-e8adbd0c510b",
										"exec": [
											"var expected_response =",
											"{",
											"  \"resourceType\": \"Patient\",",
											"  \"id\": \"9000000025\",",
											"  \"identifier\": [",
											"    {",
											"      \"system\": \"https://fhir.nhs.uk/Id/nhs-number\",",
											"      \"value\": \"9000000025\",",
											"      \"extension\": [",
											"        {",
											"          \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus\",",
											"          \"valueCodeableConcept\": {",
											"            \"coding\": [",
											"              {",
											"                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-NHSNumberVerificationStatus\",",
											"                \"version\": \"1.0.0\",",
											"                \"code\": \"01\",",
											"                \"display\": \"Number present and verified\"",
											"              }",
											"            ]",
											"          }",
											"        }",
											"      ]",
											"    }",
											"  ],",
											"  \"meta\": {",
											"    \"versionId\": \"2\",",
											"    \"security\": [",
											"      {",
											"        \"system\": \"https://www.hl7.org/fhir/valueset-security-labels.html\",",
											"        \"code\": \"R\",",
											"        \"display\": \"restricted\"",
											"      }",
											"    ]",
											"  },",
											"  \"name\": [",
											"    {",
											"      \"id\": \"123\",",
											"      \"use\": \"usual\",",
											"      \"period\": {",
											"        \"start\": \"2020-01-01\",",
											"        \"end\": \"2021-12-31\"",
											"      },",
											"      \"given\": [",
											"        \"Janet\"",
											"      ],",
											"      \"family\": \"Smythe\",",
											"      \"prefix\": [",
											"        \"Mrs\"",
											"      ],",
											"      \"suffix\": [",
											"        \"MBE\"",
											"      ]",
											"    }",
											"  ],",
											"  \"gender\": \"female\",",
											"  \"birthDate\": \"2010-10-22\",",
											"  \"deceasedDateTime\": \"2010-10-22T00:00:00+00:00\",",
											"  \"address\": [],",
											"  \"telecom\": [],",
											"  \"generalPractitioner\": [],",
											"  \"extension\": [",
											"    {",
											"      \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-DeathNotificationStatus\",",
											"      \"extension\": [",
											"        {",
											"          \"url\": \"deathNotificationStatus\",",
											"          \"valueCodeableConcept\": {",
											"            \"coding\": [",
											"              {",
											"                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-DeathNotificationStatus\",",
											"                \"version\": \"1.0.0\",",
											"                \"code\": \"2\",",
											"                \"display\": \"Formal - death notice received from Registrar of Deaths\"",
											"              }",
											"            ]",
											"          }",
											"        },",
											"        {",
											"          \"url\": \"systemEffectiveDate\",",
											"          \"valueDateTime\": \"2010-10-22T00:00:00+00:00\"",
											"        }",
											"      ]",
											"    }",
											"  ]",
											"}",
											"",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000025",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000025"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "RelatedPerson",
					"item": [
						{
							"name": "Related Persons Exists",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ba50b346-d17f-4f6f-8931-288c97f189f2",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 200 OK\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct etag header\", function () {",
											"    pm.response.to.have.header(\"etag\", \"W/\\\"2\\\"\");",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(pm.response.json().resourceType)).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").resourceType));",
											"    pm.expect(JSON.stringify(pm.response.json().total)).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").total));",
											"    pm.expect(JSON.stringify(pm.response.json().type)).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").type));",
											"    pm.expect(JSON.stringify(pm.response.json().entry[0])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[0]));",
											"    pm.expect(JSON.stringify(pm.response.json().entry[1])).to.eql(JSON.stringify(pm.environment.get(\"expected_response\").entry[1]));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3aac5796-d6c7-4dc5-818c-194fe3c4d779",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"Bundle\",",
											"    \"type\": \"searchset\",",
											"    \"timestamp\": \"2020-04-08T08:25:54+00:00\",",
											"    \"total\": 2,",
											"    \"entry\": [",
											"        {",
											"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009/RelatedPerson/507B7621\",",
											"            \"resource\": {",
											"                \"id\": \"507B7621\",",
											"                \"resourceType\": \"RelatedPerson\",",
											"                \"patient\": {",
											"                    \"type\": \"Patient\",",
											"                    \"identifier\": {",
											"                        \"system\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient\",",
											"                        \"value\": \"90000000009\"",
											"                    },",
											"                    \"reference\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/90000000009\"",
											"                },",
											"                \"active\": true,",
											"                \"period\": {",
											"                    \"start\": \"2020-01-01\",",
											"                    \"end\": \"2021-12-31\"",
											"                },",
											"                \"name\": [",
											"                    {",
											"                        \"use\": \"usual\",",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"given\": [",
											"                            \"Jane\"",
											"                        ],",
											"                        \"family\": \"Smith\",",
											"                        \"prefix\": [",
											"                            \"Mrs\"",
											"                        ],",
											"                        \"suffix\": [",
											"                            \"MBE\"",
											"                        ]",
											"                    }",
											"                ],",
											"                \"address\": [",
											"                    {",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"use\": \"home\",",
											"                        \"line\": [",
											"                            \"1 Trevelyan Square\",",
											"                            \"Boar Lane\",",
											"                            \"City Centre\",",
											"                            \"Leeds\",",
											"                            \"West Yorkshire\"",
											"                        ],",
											"                        \"postalCode\": \"LS1 6AE\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-AddressKey\",",
											"                                \"extension\": [",
											"                                    {",
											"                                        \"url\": \"type\",",
											"                                        \"valueCoding\": {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AddressKeyType\",",
											"                                            \"code\": \"PAF\"",
											"                                        }",
											"                                    },",
											"                                    {",
											"                                        \"url\": \"value\",",
											"                                        \"valueString\": \"12345678\"",
											"                                    }",
											"                                ]",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"telecom\": [",
											"                    {",
											"                        \"period\": {",
											"                            \"start\": \"2020-01-01\",",
											"                            \"end\": \"2021-12-31\"",
											"                        },",
											"                        \"system\": \"phone\",",
											"                        \"value\": \"01632960587\",",
											"                        \"use\": \"work\"",
											"                    }",
											"                ],",
											"                \"relationship\": [",
											"                    {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AdditionalRelatedPersonRole\",",
											"                                \"code\": \"Guardian\",",
											"                                \"display\": \"Guardian of patient\"",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"extension\": [",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-CopyCorrespondenceIndicator\",",
											"                        \"valueBoolean\": true",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactRank\",",
											"                        \"valuePositiveInt\": 1",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"PreferredWrittenCommunicationFormat\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",",
											"                                            \"code\": \"12\",",
											"                                            \"display\": \"Braille\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"PreferredContactMethod\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\",",
											"                                            \"code\": \"1\",",
											"                                            \"display\": \"Letter\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"PreferredContactTimes\",",
											"                                \"valueString\": \"Not after 7pm\"",
											"                            }",
											"                        ]",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"language\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",",
											"                                            \"version\": \"1.0.0\",",
											"                                            \"code\": \"fr\",",
											"                                            \"display\": \"French\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"interpreterRequired\",",
											"                                \"valueBoolean\": true",
											"                            }",
											"                        ]",
											"                    }",
											"                ]",
											"            }",
											"        },",
											"        {",
											"            \"fullUrl\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/9000000009/RelatedPerson/B3380E98\",",
											"            \"resource\": {",
											"                \"id\": \"B3380E98\",",
											"                \"resourceType\": \"RelatedPerson\",",
											"                \"patient\": {",
											"                    \"type\": \"Patient\",",
											"                    \"identifier\": {",
											"                        \"system\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient\",",
											"                        \"value\": \"90000000009\"",
											"                    },",
											"                    \"reference\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/90000000009\"",
											"                },",
											"                \"active\": true,",
											"                \"period\": {",
											"                    \"start\": \"2020-01-01\",",
											"                    \"end\": \"2021-12-31\"",
											"                },",
											"                \"relationship\": [",
											"                    {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AdditionalRelatedPersonRole\",",
											"                                \"code\": \"Guardian\",",
											"                                \"display\": \"Guardian of patient\"",
											"                            }",
											"                        ]",
											"                    }",
											"                ],",
											"                \"extension\": [",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-CopyCorrespondenceIndicator\",",
											"                        \"valueBoolean\": true",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactRank\",",
											"                        \"valuePositiveInt\": 1",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"PreferredWrittenCommunicationFormat\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",",
											"                                            \"code\": \"12\",",
											"                                            \"display\": \"Braille\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"PreferredContactMethod\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\",",
											"                                            \"code\": \"1\",",
											"                                            \"display\": \"Letter\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"PreferredContactTimes\",",
											"                                \"valueString\": \"Not after 7pm\"",
											"                            }",
											"                        ]",
											"                    },",
											"                    {",
											"                        \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",",
											"                        \"extension\": [",
											"                            {",
											"                                \"url\": \"language\",",
											"                                \"valueCodeableConcept\": {",
											"                                    \"coding\": [",
											"                                        {",
											"                                            \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",",
											"                                            \"version\": \"1.0.0\",",
											"                                            \"code\": \"fr\",",
											"                                            \"display\": \"French\"",
											"                                        }",
											"                                    ]",
											"                                }",
											"                            },",
											"                            {",
											"                                \"url\": \"interpreterRequired\",",
											"                                \"valueBoolean\": true",
											"                            }",
											"                        ]",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000009/RelatedPerson",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000009",
										"RelatedPerson"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Patient does not Exist",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "61c1fa94-1570-48a0-a703-93d86d20f3c9",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 404 Not Found\", () =>{",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"not_found\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"RESOURCE_NOT_FOUND\",",
											"                        \"display\": \"Resource not found\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9111231130/RelatedPerson",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9111231130",
										"RelatedPerson"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Related Persons do not Exist",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "30b6afc3-7e51-4d85-8bdb-ccc6e0914744",
										"exec": [
											"var response = pm.response.json();",
											"",
											"pm.test(\"Returns status code 404 Not Found\", () =>{",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(response)).to.eql(JSON.stringify({",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"not_found\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"RESOURCE_NOT_FOUND\",",
											"                        \"display\": \"Resource not found\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}));",
											"})"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000025/RelatedPerson",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000025",
										"RelatedPerson"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Related Person by Object Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "82e7f401-bb0b-4c7a-9f68-170b888eb0b3",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 200 OK\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns correct etag header\", function () {",
											"    pm.response.to.have.header(\"etag\", \"W/\\\"2\\\"\");",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(pm.response.json())).to.eql(JSON.stringify(pm.environment.get(\"expected_response\")));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "07c75c8f-5ea2-453b-b543-d1122f475a05",
										"exec": [
											"var expected_response =",
											"{",
											"    \"id\": \"B3380E98\",",
											"    \"resourceType\": \"RelatedPerson\",",
											"    \"patient\": {",
											"        \"type\": \"Patient\",",
											"        \"identifier\": {",
											"            \"system\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient\",",
											"            \"value\": \"90000000009\"",
											"        },",
											"        \"reference\": \"https://beta.api.digital.nhs.uk/personal-demographics/Patient/90000000009\"",
											"    },",
											"    \"active\": true,",
											"    \"period\": {",
											"        \"start\": \"2020-01-01\",",
											"        \"end\": \"2021-12-31\"",
											"    },",
											"    \"relationship\": [",
											"        {",
											"            \"coding\": [",
											"                {",
											"                    \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AdditionalRelatedPersonRole\",",
											"                    \"code\": \"Guardian\",",
											"                    \"display\": \"Guardian of patient\"",
											"                }",
											"            ]",
											"        }",
											"    ],",
											"    \"extension\": [",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-CopyCorrespondenceIndicator\",",
											"            \"valueBoolean\": true",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactRank\",",
											"            \"valuePositiveInt\": 1",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"PreferredWrittenCommunicationFormat\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\",",
											"                                \"code\": \"12\",",
											"                                \"display\": \"Braille\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"PreferredContactMethod\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\",",
											"                                \"code\": \"1\",",
											"                                \"display\": \"Letter\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"PreferredContactTimes\",",
											"                    \"valueString\": \"Not after 7pm\"",
											"                }",
											"            ]",
											"        },",
											"        {",
											"            \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",",
											"            \"extension\": [",
											"                {",
											"                    \"url\": \"language\",",
											"                    \"valueCodeableConcept\": {",
											"                        \"coding\": [",
											"                            {",
											"                                \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",",
											"                                \"version\": \"1.0.0\",",
											"                                \"code\": \"fr\",",
											"                                \"display\": \"French\"",
											"                            }",
											"                        ]",
											"                    }",
											"                },",
											"                {",
											"                    \"url\": \"interpreterRequired\",",
											"                    \"valueBoolean\": true",
											"                }",
											"            ]",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000009/RelatedPerson/B3380E98",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000009",
										"RelatedPerson",
										"B3380E98"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						},
						{
							"name": "Related Person by Object Id does not Exist",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c92ae1d2-38d9-4fbd-ad9f-268ca960612f",
										"exec": [
											"var response = pm.response.json();",
											"    ",
											"",
											"pm.test(\"Returns status code 404 OK\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Returns correct canned response\", () =>{",
											"    pm.expect(JSON.stringify(pm.response.json())).to.eql(JSON.stringify(pm.environment.get(\"expected_response\")));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "05c44499-89d7-4ca2-a80d-62a2c9c54e2d",
										"exec": [
											"var expected_response =",
											"{",
											"    \"resourceType\": \"OperationOutcome\",",
											"    \"issue\": [",
											"        {",
											"            \"severity\": \"error\",",
											"            \"code\": \"not_found\",",
											"            \"details\": {",
											"                \"coding\": [",
											"                    {",
											"                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode\",",
											"                        \"version\": \"1\",",
											"                        \"code\": \"RESOURCE_NOT_FOUND\",",
											"                        \"display\": \"Resource not found\"",
											"                    }",
											"                ]",
											"            }",
											"        }",
											"    ]",
											"}",
											"",
											"pm.environment.set(\"expected_response\", expected_response);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{environment}}/Patient/9000000009/RelatedPerson/12345678",
									"host": [
										"{{environment}}"
									],
									"path": [
										"Patient",
										"9000000009",
										"RelatedPerson",
										"12345678"
									]
								},
								"description": "GIVEN I have a valid NHS Number\nWHEN I call the simple search query\nTHEN I should get the patients details"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "117464a3-02e0-43df-992c-d2f91ff72d3a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "2c029e08-4cce-45f4-96bc-a9ade5b7d503",
				"type": "text/javascript",
				"exec": [
					"pm.test(\"Returns fhirVersion 4.0 Content-Type header\", () =>{",
					"        pm.response.to.have.header(\"Content-Type\");",
					"        pm.expect(postman.getResponseHeader(\"Content-type\")).to.equal(\"application/fhir+json; fhirVersion=4.0\");",
					"});"
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}